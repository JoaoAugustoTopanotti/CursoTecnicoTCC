"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/criarCheckoutSession";
exports.ids = ["pages/api/criarCheckoutSession"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "stripe":
/*!*************************!*\
  !*** external "stripe" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("stripe");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FcriarCheckoutSession&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5CcriarCheckoutSession.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FcriarCheckoutSession&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5CcriarCheckoutSession.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_criarCheckoutSession_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\criarCheckoutSession.js */ \"(api)/./src/pages/api/criarCheckoutSession.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_criarCheckoutSession_js__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_criarCheckoutSession_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_criarCheckoutSession_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_criarCheckoutSession_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/criarCheckoutSession\",\n        pathname: \"/api/criarCheckoutSession\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_criarCheckoutSession_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNyaWFyQ2hlY2tvdXRTZXNzaW9uJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTVDcGFnZXMlNUNhcGklNUNjcmlhckNoZWNrb3V0U2Vzc2lvbi5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUN1RTtBQUN2RTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsbUVBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLG1FQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL2Fncm9zaG9wLz9jYzJjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmNcXFxccGFnZXNcXFxcYXBpXFxcXGNyaWFyQ2hlY2tvdXRTZXNzaW9uLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY3JpYXJDaGVja291dFNlc3Npb25cIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jcmlhckNoZWNrb3V0U2Vzc2lvblwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FcriarCheckoutSession&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5CcriarCheckoutSession.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/pages/api/criarCheckoutSession.js":
/*!***********************************************!*\
  !*** ./src/pages/api/criarCheckoutSession.js ***!
  \***********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stripe */ \"stripe\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([stripe__WEBPACK_IMPORTED_MODULE_0__]);\nstripe__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Crie uma instância do Stripe\nconst stripe = new stripe__WEBPACK_IMPORTED_MODULE_0__[\"default\"](process.env.STRIPE_SECRET_KEY);\nasync function handler(req, res) {\n    if (req.method === \"POST\") {\n        const { cartItems, produtoId, nome, descricao, preco, quantidade } = req.body;\n        let lineItems;\n        let produtoIds // Criação da variável para armazenar os IDs dos produtos\n        ;\n        console.log(\"Recebendo requisi\\xe7\\xe3o para criar sess\\xe3o de checkout:\", req.body);\n        // Validação dos parâmetros recebidos\n        if (cartItems && cartItems.length > 0) {\n            console.log(\"Itens no carrinho:\", cartItems);\n            // Se cartItems estiver presente, use-o\n            lineItems = cartItems.map((item)=>{\n                const unit_amount = item.price && !Number.isNaN(item.price) ? Math.round(item.price * 100) : 0;\n                // Validação dos campos nome e descrição\n                if (!item.Nome || !item.Descrição) {\n                    throw new Error(\"Nome ou descri\\xe7\\xe3o do produto ausentes.\");\n                }\n                return {\n                    price_data: {\n                        currency: \"brl\",\n                        product_data: {\n                            name: item.Nome,\n                            description: item.Descrição\n                        },\n                        unit_amount\n                    },\n                    quantity: item.quantity || 1\n                };\n            });\n            // Captura os IDs dos produtos em uma variável separada\n            produtoIds = cartItems.map((item)=>item.produtoId);\n            // Verifica se a quantidade em estoque é suficiente\n            cartItems.forEach((item)=>{\n                if (item.Quantidade < item.quantidade) {\n                    throw new Error(`Estoque insuficiente para o produto: ${item.Nome}. Disponível: ${item.Quantidade}`);\n                }\n            });\n        } else if (produtoId && nome && descricao && preco && quantidade) {\n            // Caso contrário, valide e use os parâmetros do produto único\n            const unit_amount = Math.round(preco * 100);\n            if (!nome || !descricao) {\n                return res.status(400).json({\n                    error: \"Nome ou descri\\xe7\\xe3o do produto ausentes.\"\n                });\n            }\n            lineItems = [\n                {\n                    price_data: {\n                        currency: \"brl\",\n                        product_data: {\n                            name: nome,\n                            description: descricao\n                        },\n                        unit_amount\n                    },\n                    quantity: quantidade || 1\n                }\n            ];\n            produtoIds = [\n                produtoId\n            ] // Atribuição direta caso seja um produto único\n            ;\n            // Verifique o estoque do produto único\n            if (req.body.Estoque < quantidade) {\n                return res.status(400).json({\n                    error: `Estoque insuficiente para o produto: ${nome}.`\n                });\n            }\n        } else {\n            return res.status(400).json({\n                error: \"Par\\xe2metros obrigat\\xf3rios ausentes.\"\n            });\n        }\n        try {\n            // Cria uma sessão de checkout no Stripe\n            const session = await stripe.checkout.sessions.create({\n                payment_method_types: [\n                    \"card\"\n                ],\n                line_items: lineItems,\n                mode: \"payment\",\n                success_url: `${req.headers.origin}/sucesso`,\n                cancel_url: `${req.headers.origin}/cancelado`,\n                metadata: {\n                    produtoIds: JSON.stringify(produtoIds)\n                }\n            });\n            // Retorna o ID da sessão para redirecionar ao checkout do Stripe\n            console.log(\"Sess\\xe3o de checkout criada com sucesso:\", session);\n            res.status(200).json({\n                success: true,\n                sessionId: session.id\n            });\n        } catch (error) {\n            console.error(\"Erro ao criar a sess\\xe3o de checkout:\", error);\n            res.status(500).json({\n                error: \"Erro ao processar a compra\",\n                details: error.message\n            });\n        }\n    } else {\n        res.setHeader(\"Allow\", [\n            \"POST\"\n        ]);\n        res.status(405).end(`Método ${req.method} não permitido`);\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2NyaWFyQ2hlY2tvdXRTZXNzaW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTJCO0FBRTNCLCtCQUErQjtBQUMvQixNQUFNQyxTQUFTLElBQUlELDhDQUFNQSxDQUFDRSxRQUFRQyxHQUFHLENBQUNDLGlCQUFpQjtBQUV4QyxlQUFlQyxRQUFRQyxHQUFHLEVBQUVDLEdBQUc7SUFDNUMsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLFFBQVE7UUFDekIsTUFBTSxFQUFFQyxTQUFTLEVBQUVDLFNBQVMsRUFBRUMsSUFBSSxFQUFFQyxTQUFTLEVBQUVDLEtBQUssRUFBRUMsVUFBVSxFQUFFLEdBQ2hFUixJQUFJUyxJQUFJO1FBRVYsSUFBSUM7UUFDSixJQUFJQyxXQUFXLHlEQUF5RDs7UUFFeEVDLFFBQVFDLEdBQUcsQ0FBQyxnRUFBdURiLElBQUlTLElBQUk7UUFFM0UscUNBQXFDO1FBQ3JDLElBQUlOLGFBQWFBLFVBQVVXLE1BQU0sR0FBRyxHQUFHO1lBQ3JDRixRQUFRQyxHQUFHLENBQUMsc0JBQXNCVjtZQUVsQyx1Q0FBdUM7WUFDdkNPLFlBQVlQLFVBQVVZLEdBQUcsQ0FBQ0MsQ0FBQUE7Z0JBQ3hCLE1BQU1DLGNBQ0pELEtBQUtFLEtBQUssSUFBSSxDQUFDQyxPQUFPQyxLQUFLLENBQUNKLEtBQUtFLEtBQUssSUFDbENHLEtBQUtDLEtBQUssQ0FBQ04sS0FBS0UsS0FBSyxHQUFHLE9BQ3hCO2dCQUVOLHdDQUF3QztnQkFDeEMsSUFBSSxDQUFDRixLQUFLTyxJQUFJLElBQUksQ0FBQ1AsS0FBS1EsU0FBUyxFQUFFO29CQUNqQyxNQUFNLElBQUlDLE1BQU07Z0JBQ2xCO2dCQUVBLE9BQU87b0JBQ0xDLFlBQVk7d0JBQ1ZDLFVBQVU7d0JBQ1ZDLGNBQWM7NEJBQ1pDLE1BQU1iLEtBQUtPLElBQUk7NEJBQ2ZPLGFBQWFkLEtBQUtRLFNBQVM7d0JBQzdCO3dCQUNBUDtvQkFDRjtvQkFDQWMsVUFBVWYsS0FBS2UsUUFBUSxJQUFJO2dCQUM3QjtZQUNGO1lBRUEsdURBQXVEO1lBQ3ZEcEIsYUFBYVIsVUFBVVksR0FBRyxDQUFDQyxDQUFBQSxPQUFRQSxLQUFLWixTQUFTO1lBRWpELG1EQUFtRDtZQUNuREQsVUFBVTZCLE9BQU8sQ0FBQ2hCLENBQUFBO2dCQUNoQixJQUFJQSxLQUFLaUIsVUFBVSxHQUFHakIsS0FBS1IsVUFBVSxFQUFFO29CQUNyQyxNQUFNLElBQUlpQixNQUNSLENBQUMscUNBQXFDLEVBQUVULEtBQUtPLElBQUksQ0FBQyxjQUFjLEVBQUVQLEtBQUtpQixVQUFVLENBQUMsQ0FBQztnQkFFdkY7WUFDRjtRQUNGLE9BQU8sSUFBSTdCLGFBQWFDLFFBQVFDLGFBQWFDLFNBQVNDLFlBQVk7WUFDaEUsOERBQThEO1lBQzlELE1BQU1TLGNBQWNJLEtBQUtDLEtBQUssQ0FBQ2YsUUFBUTtZQUV2QyxJQUFJLENBQUNGLFFBQVEsQ0FBQ0MsV0FBVztnQkFDdkIsT0FBT0wsSUFDSmlDLE1BQU0sQ0FBQyxLQUNQQyxJQUFJLENBQUM7b0JBQUVDLE9BQU87Z0JBQXlDO1lBQzVEO1lBRUExQixZQUFZO2dCQUNWO29CQUNFZ0IsWUFBWTt3QkFDVkMsVUFBVTt3QkFDVkMsY0FBYzs0QkFDWkMsTUFBTXhCOzRCQUNOeUIsYUFBYXhCO3dCQUNmO3dCQUNBVztvQkFDRjtvQkFDQWMsVUFBVXZCLGNBQWM7Z0JBQzFCO2FBQ0Q7WUFFREcsYUFBYTtnQkFBQ1A7YUFBVSxDQUFDLCtDQUErQzs7WUFFeEUsdUNBQXVDO1lBQ3ZDLElBQUlKLElBQUlTLElBQUksQ0FBQzRCLE9BQU8sR0FBRzdCLFlBQVk7Z0JBQ2pDLE9BQU9QLElBQ0ppQyxNQUFNLENBQUMsS0FDUEMsSUFBSSxDQUFDO29CQUFFQyxPQUFPLENBQUMscUNBQXFDLEVBQUUvQixLQUFLLENBQUMsQ0FBQztnQkFBQztZQUNuRTtRQUNGLE9BQU87WUFDTCxPQUFPSixJQUNKaUMsTUFBTSxDQUFDLEtBQ1BDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFvQztRQUN2RDtRQUNBLElBQUk7WUFDRix3Q0FBd0M7WUFDeEMsTUFBTUUsVUFBVSxNQUFNM0MsT0FBTzRDLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDQyxNQUFNLENBQUM7Z0JBQ3BEQyxzQkFBc0I7b0JBQUM7aUJBQU87Z0JBQzlCQyxZQUFZakM7Z0JBQ1prQyxNQUFNO2dCQUNOQyxhQUFhLENBQUMsRUFBRTdDLElBQUk4QyxPQUFPLENBQUNDLE1BQU0sQ0FBQyxRQUFRLENBQUM7Z0JBQzVDQyxZQUFZLENBQUMsRUFBRWhELElBQUk4QyxPQUFPLENBQUNDLE1BQU0sQ0FBQyxVQUFVLENBQUM7Z0JBQzdDRSxVQUFVO29CQUNSdEMsWUFBWXVDLEtBQUtDLFNBQVMsQ0FBQ3hDO2dCQUM3QjtZQUNGO1lBRUEsaUVBQWlFO1lBQ2pFQyxRQUFRQyxHQUFHLENBQUMsNkNBQTBDeUI7WUFDdERyQyxJQUFJaUMsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRWlCLFNBQVM7Z0JBQU1DLFdBQVdmLFFBQVFnQixFQUFFO1lBQUM7UUFDOUQsRUFBRSxPQUFPbEIsT0FBTztZQUNkeEIsUUFBUXdCLEtBQUssQ0FBQywwQ0FBdUNBO1lBQ3JEbkMsSUFBSWlDLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQ25CQyxPQUFPO2dCQUNQbUIsU0FBU25CLE1BQU1vQixPQUFPO1lBQ3hCO1FBQ0Y7SUFDRixPQUFPO1FBQ0x2RCxJQUFJd0QsU0FBUyxDQUFDLFNBQVM7WUFBQztTQUFPO1FBQy9CeEQsSUFBSWlDLE1BQU0sQ0FBQyxLQUFLd0IsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFMUQsSUFBSUUsTUFBTSxDQUFDLGNBQWMsQ0FBQztJQUMxRDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWdyb3Nob3AvLi9zcmMvcGFnZXMvYXBpL2NyaWFyQ2hlY2tvdXRTZXNzaW9uLmpzPzBmMGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFN0cmlwZSBmcm9tICdzdHJpcGUnXHJcblxyXG4vLyBDcmllIHVtYSBpbnN0w6JuY2lhIGRvIFN0cmlwZVxyXG5jb25zdCBzdHJpcGUgPSBuZXcgU3RyaXBlKHByb2Nlc3MuZW52LlNUUklQRV9TRUNSRVRfS0VZKVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4gIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcclxuICAgIGNvbnN0IHsgY2FydEl0ZW1zLCBwcm9kdXRvSWQsIG5vbWUsIGRlc2NyaWNhbywgcHJlY28sIHF1YW50aWRhZGUgfSA9XHJcbiAgICAgIHJlcS5ib2R5XHJcblxyXG4gICAgbGV0IGxpbmVJdGVtc1xyXG4gICAgbGV0IHByb2R1dG9JZHMgLy8gQ3JpYcOnw6NvIGRhIHZhcmnDoXZlbCBwYXJhIGFybWF6ZW5hciBvcyBJRHMgZG9zIHByb2R1dG9zXHJcblxyXG4gICAgY29uc29sZS5sb2coJ1JlY2ViZW5kbyByZXF1aXNpw6fDo28gcGFyYSBjcmlhciBzZXNzw6NvIGRlIGNoZWNrb3V0OicsIHJlcS5ib2R5KVxyXG5cclxuICAgIC8vIFZhbGlkYcOnw6NvIGRvcyBwYXLDom1ldHJvcyByZWNlYmlkb3NcclxuICAgIGlmIChjYXJ0SXRlbXMgJiYgY2FydEl0ZW1zLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc29sZS5sb2coJ0l0ZW5zIG5vIGNhcnJpbmhvOicsIGNhcnRJdGVtcylcclxuXHJcbiAgICAgIC8vIFNlIGNhcnRJdGVtcyBlc3RpdmVyIHByZXNlbnRlLCB1c2Utb1xyXG4gICAgICBsaW5lSXRlbXMgPSBjYXJ0SXRlbXMubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgIGNvbnN0IHVuaXRfYW1vdW50ID1cclxuICAgICAgICAgIGl0ZW0ucHJpY2UgJiYgIU51bWJlci5pc05hTihpdGVtLnByaWNlKVxyXG4gICAgICAgICAgICA/IE1hdGgucm91bmQoaXRlbS5wcmljZSAqIDEwMClcclxuICAgICAgICAgICAgOiAwXHJcblxyXG4gICAgICAgIC8vIFZhbGlkYcOnw6NvIGRvcyBjYW1wb3Mgbm9tZSBlIGRlc2NyacOnw6NvXHJcbiAgICAgICAgaWYgKCFpdGVtLk5vbWUgfHwgIWl0ZW0uRGVzY3Jpw6fDo28pIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm9tZSBvdSBkZXNjcmnDp8OjbyBkbyBwcm9kdXRvIGF1c2VudGVzLicpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgcHJpY2VfZGF0YToge1xyXG4gICAgICAgICAgICBjdXJyZW5jeTogJ2JybCcsXHJcbiAgICAgICAgICAgIHByb2R1Y3RfZGF0YToge1xyXG4gICAgICAgICAgICAgIG5hbWU6IGl0ZW0uTm9tZSxcclxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogaXRlbS5EZXNjcmnDp8OjbyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdW5pdF9hbW91bnQsIC8vIFByZcOnbyBlbSBjZW50YXZvc1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHF1YW50aXR5OiBpdGVtLnF1YW50aXR5IHx8IDEsIC8vIFF1YW50aWRhZGUgdmFyacOhdmVsLCBwYWRyw6NvIHBhcmEgMVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIC8vIENhcHR1cmEgb3MgSURzIGRvcyBwcm9kdXRvcyBlbSB1bWEgdmFyacOhdmVsIHNlcGFyYWRhXHJcbiAgICAgIHByb2R1dG9JZHMgPSBjYXJ0SXRlbXMubWFwKGl0ZW0gPT4gaXRlbS5wcm9kdXRvSWQpXHJcblxyXG4gICAgICAvLyBWZXJpZmljYSBzZSBhIHF1YW50aWRhZGUgZW0gZXN0b3F1ZSDDqSBzdWZpY2llbnRlXHJcbiAgICAgIGNhcnRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgIGlmIChpdGVtLlF1YW50aWRhZGUgPCBpdGVtLnF1YW50aWRhZGUpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgYEVzdG9xdWUgaW5zdWZpY2llbnRlIHBhcmEgbyBwcm9kdXRvOiAke2l0ZW0uTm9tZX0uIERpc3BvbsOtdmVsOiAke2l0ZW0uUXVhbnRpZGFkZX1gXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfSBlbHNlIGlmIChwcm9kdXRvSWQgJiYgbm9tZSAmJiBkZXNjcmljYW8gJiYgcHJlY28gJiYgcXVhbnRpZGFkZSkge1xyXG4gICAgICAvLyBDYXNvIGNvbnRyw6FyaW8sIHZhbGlkZSBlIHVzZSBvcyBwYXLDom1ldHJvcyBkbyBwcm9kdXRvIMO6bmljb1xyXG4gICAgICBjb25zdCB1bml0X2Ftb3VudCA9IE1hdGgucm91bmQocHJlY28gKiAxMDApXHJcblxyXG4gICAgICBpZiAoIW5vbWUgfHwgIWRlc2NyaWNhbykge1xyXG4gICAgICAgIHJldHVybiByZXNcclxuICAgICAgICAgIC5zdGF0dXMoNDAwKVxyXG4gICAgICAgICAgLmpzb24oeyBlcnJvcjogJ05vbWUgb3UgZGVzY3Jpw6fDo28gZG8gcHJvZHV0byBhdXNlbnRlcy4nIH0pXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxpbmVJdGVtcyA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBwcmljZV9kYXRhOiB7XHJcbiAgICAgICAgICAgIGN1cnJlbmN5OiAnYnJsJyxcclxuICAgICAgICAgICAgcHJvZHVjdF9kYXRhOiB7XHJcbiAgICAgICAgICAgICAgbmFtZTogbm9tZSxcclxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpY2FvLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB1bml0X2Ftb3VudCwgLy8gUHJlw6dvIGVtIGNlbnRhdm9zXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcXVhbnRpdHk6IHF1YW50aWRhZGUgfHwgMSwgLy8gUXVhbnRpZGFkZSBkbyBwcm9kdXRvLCBwYWRyw6NvIHBhcmEgMVxyXG4gICAgICAgIH0sXHJcbiAgICAgIF1cclxuXHJcbiAgICAgIHByb2R1dG9JZHMgPSBbcHJvZHV0b0lkXSAvLyBBdHJpYnVpw6fDo28gZGlyZXRhIGNhc28gc2VqYSB1bSBwcm9kdXRvIMO6bmljb1xyXG5cclxuICAgICAgLy8gVmVyaWZpcXVlIG8gZXN0b3F1ZSBkbyBwcm9kdXRvIMO6bmljb1xyXG4gICAgICBpZiAocmVxLmJvZHkuRXN0b3F1ZSA8IHF1YW50aWRhZGUpIHtcclxuICAgICAgICByZXR1cm4gcmVzXHJcbiAgICAgICAgICAuc3RhdHVzKDQwMClcclxuICAgICAgICAgIC5qc29uKHsgZXJyb3I6IGBFc3RvcXVlIGluc3VmaWNpZW50ZSBwYXJhIG8gcHJvZHV0bzogJHtub21lfS5gIH0pXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiByZXNcclxuICAgICAgICAuc3RhdHVzKDQwMClcclxuICAgICAgICAuanNvbih7IGVycm9yOiAnUGFyw6JtZXRyb3Mgb2JyaWdhdMOzcmlvcyBhdXNlbnRlcy4nIH0pXHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBDcmlhIHVtYSBzZXNzw6NvIGRlIGNoZWNrb3V0IG5vIFN0cmlwZVxyXG4gICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgc3RyaXBlLmNoZWNrb3V0LnNlc3Npb25zLmNyZWF0ZSh7XHJcbiAgICAgICAgcGF5bWVudF9tZXRob2RfdHlwZXM6IFsnY2FyZCddLFxyXG4gICAgICAgIGxpbmVfaXRlbXM6IGxpbmVJdGVtcyxcclxuICAgICAgICBtb2RlOiAncGF5bWVudCcsXHJcbiAgICAgICAgc3VjY2Vzc191cmw6IGAke3JlcS5oZWFkZXJzLm9yaWdpbn0vc3VjZXNzb2AsXHJcbiAgICAgICAgY2FuY2VsX3VybDogYCR7cmVxLmhlYWRlcnMub3JpZ2lufS9jYW5jZWxhZG9gLFxyXG4gICAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgICBwcm9kdXRvSWRzOiBKU09OLnN0cmluZ2lmeShwcm9kdXRvSWRzKSwgLy8gVXNhbmRvIGEgdmFyacOhdmVsIHByb2R1dG9JZHNcclxuICAgICAgICB9LFxyXG4gICAgICB9KVxyXG5cclxuICAgICAgLy8gUmV0b3JuYSBvIElEIGRhIHNlc3PDo28gcGFyYSByZWRpcmVjaW9uYXIgYW8gY2hlY2tvdXQgZG8gU3RyaXBlXHJcbiAgICAgIGNvbnNvbGUubG9nKCdTZXNzw6NvIGRlIGNoZWNrb3V0IGNyaWFkYSBjb20gc3VjZXNzbzonLCBzZXNzaW9uKVxyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIHNlc3Npb25JZDogc2Vzc2lvbi5pZCB9KVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBjcmlhciBhIHNlc3PDo28gZGUgY2hlY2tvdXQ6JywgZXJyb3IpXHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICBlcnJvcjogJ0Vycm8gYW8gcHJvY2Vzc2FyIGEgY29tcHJhJyxcclxuICAgICAgICBkZXRhaWxzOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICByZXMuc2V0SGVhZGVyKCdBbGxvdycsIFsnUE9TVCddKVxyXG4gICAgcmVzLnN0YXR1cyg0MDUpLmVuZChgTcOpdG9kbyAke3JlcS5tZXRob2R9IG7Do28gcGVybWl0aWRvYClcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIlN0cmlwZSIsInN0cmlwZSIsInByb2Nlc3MiLCJlbnYiLCJTVFJJUEVfU0VDUkVUX0tFWSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJjYXJ0SXRlbXMiLCJwcm9kdXRvSWQiLCJub21lIiwiZGVzY3JpY2FvIiwicHJlY28iLCJxdWFudGlkYWRlIiwiYm9keSIsImxpbmVJdGVtcyIsInByb2R1dG9JZHMiLCJjb25zb2xlIiwibG9nIiwibGVuZ3RoIiwibWFwIiwiaXRlbSIsInVuaXRfYW1vdW50IiwicHJpY2UiLCJOdW1iZXIiLCJpc05hTiIsIk1hdGgiLCJyb3VuZCIsIk5vbWUiLCJEZXNjcmnDp8OjbyIsIkVycm9yIiwicHJpY2VfZGF0YSIsImN1cnJlbmN5IiwicHJvZHVjdF9kYXRhIiwibmFtZSIsImRlc2NyaXB0aW9uIiwicXVhbnRpdHkiLCJmb3JFYWNoIiwiUXVhbnRpZGFkZSIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsIkVzdG9xdWUiLCJzZXNzaW9uIiwiY2hlY2tvdXQiLCJzZXNzaW9ucyIsImNyZWF0ZSIsInBheW1lbnRfbWV0aG9kX3R5cGVzIiwibGluZV9pdGVtcyIsIm1vZGUiLCJzdWNjZXNzX3VybCIsImhlYWRlcnMiLCJvcmlnaW4iLCJjYW5jZWxfdXJsIiwibWV0YWRhdGEiLCJKU09OIiwic3RyaW5naWZ5Iiwic3VjY2VzcyIsInNlc3Npb25JZCIsImlkIiwiZGV0YWlscyIsIm1lc3NhZ2UiLCJzZXRIZWFkZXIiLCJlbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/criarCheckoutSession.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FcriarCheckoutSession&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5CcriarCheckoutSession.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();