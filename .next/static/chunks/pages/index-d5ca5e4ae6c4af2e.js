(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(4742)}])},4742:function(e,a,s){"use strict";s.r(a);var t=s(5893),r=s(7294),i=s(1163),n=s(2600),o=s(109),c=s(5381),d=s(8826),l=s.n(d);a.default=function(){let{currentUser:e,logout:a}=(0,c.a)(),[s,d]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[_,m]=(0,r.useState)(""),p=(0,i.useRouter)();(0,r.useEffect)(()=>{let a=async()=>{let e=(0,o.IO)((0,o.hJ)(n.db,"Produtos")),a=await (0,o.PL)(e),s=[];a.forEach(e=>{let a=e.data();s.push({id:e.id,nome:a.Nome,descricao:a.Descrição,quantidade:a.Quantidade,imagem:a.Imagem,preco:a.Preco})}),h(s)};(async()=>{if(e){let a=(0,o.IO)((0,o.hJ)(n.db,"Pets"),(0,o.ar)("UsuarioID","==",e.uid)),s=await (0,o.PL)(a);if(!s.empty){let e=[];s.forEach(a=>{let s=a.data(),t=Math.ceil((s.PróximaVacinação.toDate()-new Date)/864e5),r="";r=t<=10?"red":t>10&&t<=20?"yellow":"green",e.push({petName:s.Nome,daysUntilVaccination:t,color:r})}),d(e)}}})(),a()},[e]);let x=async()=>{try{await a(),N(),console.log("Usu\xe1rio deslogado com sucesso."),p.push("/")}catch(e){console.error("Erro ao deslogar:",e)}},N=()=>{d([])},f=a=>{e?p.push(`/produtos/${a}`):p.push("/login")},g=u.filter(e=>e.nome.toLowerCase().includes(_.toLowerCase()));return(0,t.jsxs)("header",{className:l().header,children:[(0,t.jsx)("h2",{className:l().title,children:"Bem-vindo \xe0 Agroshop!"}),(0,t.jsx)("div",{className:l().notifications,children:s.map((e,a)=>(0,t.jsxs)("div",{className:`${l().notification} ${l()[e.color]}`,children:["Faltam apenas ",e.daysUntilVaccination," dias para ",e.petName," se vacinar!"]},a))}),(0,t.jsxs)("nav",{className:l().nav,children:[(0,t.jsxs)("ul",{className:l().navList,children:[(0,t.jsx)("li",{className:l().navItem,children:(0,t.jsx)("a",{href:"/",children:"Home"})}),(0,t.jsx)("li",{className:l().navItem,children:(0,t.jsx)("a",{href:"/agendamento",children:"Agendamento"})}),(0,t.jsx)("li",{className:l().navItem,children:(0,t.jsx)("button",{className:l().cartButton,onClick:()=>{e?p.push("/cart"):p.push("/login")},children:"Carrinho"})})]}),(0,t.jsxs)("div",{className:l().headerRight,children:[(0,t.jsx)("div",{className:l().searchBar,children:(0,t.jsx)("input",{type:"text",placeholder:"Buscar produtos...",value:_,onChange:e=>m(e.target.value)})}),!e&&(0,t.jsx)("a",{href:"/login",children:(0,t.jsx)("button",{className:l().button,children:"Fazer Login"})}),e&&(0,t.jsx)("button",{className:l().button,onClick:x,children:"Logout"})]})]}),(0,t.jsxs)("section",{className:l().products,children:[(0,t.jsx)("h3",{children:"Produtos Dispon\xedveis"}),(0,t.jsx)("div",{className:l().productsList,children:g.map(e=>(0,t.jsxs)("div",{className:l().productItem,onClick:()=>f(e.id),style:{cursor:"pointer"},children:[(0,t.jsx)("img",{src:e.imagem,alt:e.nome,className:l().productImage}),(0,t.jsx)("h4",{children:e.nome}),(0,t.jsx)("p",{children:e.descricao}),(0,t.jsxs)("p",{children:["Quantidade: ",e.quantidade]}),(0,t.jsxs)("p",{children:["Pre\xe7o: R$ ",e.preco]})]},e.id))})]})]})}},8826:function(e){e.exports={header:"Header_header__oruNi",title:"Header_title__PoVgc",notifications:"Header_notifications__sHAvS",notification:"Header_notification__YiQ6Q",red:"Header_red__iacMr",yellow:"Header_yellow__hCT9B",green:"Header_green__WBFHi",nav:"Header_nav__cyQi_",navList:"Header_navList__6SUMV",navItem:"Header_navItem__lWKo_",headerRight:"Header_headerRight__oI_H7",searchBar:"Header_searchBar__fP_gn",button:"Header_button__zflZa",products:"Header_products__NKSIs",productsList:"Header_productsList__ELHnH",productItem:"Header_productItem__xUTCJ",productImage:"Header_productImage__szhLr"}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);