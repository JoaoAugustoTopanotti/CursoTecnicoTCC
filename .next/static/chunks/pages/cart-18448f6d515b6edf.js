(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{8086:function(e,r,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return o(7048)}])},7048:function(e,r,o){"use strict";o.r(r);var t=o(5893),n=o(7294),d=o(8935),i=o(109),a=o(2600);r.default=()=>{let[e,r]=(0,n.useState)([]),[o,s]=(0,n.useState)({}),[c,u]=(0,n.useState)(0),l=(0,d.v0)().currentUser;(0,n.useEffect)(()=>{(async()=>{if(l)try{let e=(0,i.JU)(a.db,"Carrinho",l.uid),o=await (0,i.QT)(e);if(o.exists()){let{Itens:e}=o.data();if(console.log("Itens do carrinho:",e),e&&Array.isArray(e)){let o={},t=e.filter(e=>!!e.Nome&&!!e.Preco&&(o[e.produtoId]=1,!0));s(o),r(t)}}}catch(e){console.error("Erro ao buscar itens do carrinho:",e)}})()},[l]),(0,n.useEffect)(()=>{u(e.reduce((e,r)=>{let t=o[r.produtoId]||1;return e+r.Preco*t},0))},[e,o]);let h=(e,r,o)=>{r<=o&&r>0?s(o=>({...o,[e]:r})):alert("A quantidade selecionada excede o estoque dispon\xedvel.")},p=async o=>{if(l)try{let t=(0,i.JU)(a.db,"Carrinho",l.uid),n=e.find(e=>e.produtoId===o);await (0,i.r7)(t,{Itens:(0,i.Ab)(n)}),r(e.filter(e=>e.produtoId!==o))}catch(e){console.error("Erro ao remover item do carrinho:",e)}};return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Meu Carrinho"}),0===e.length?(0,t.jsx)("p",{children:"Seu carrinho est\xe1 vazio."}):(0,t.jsx)("ul",{children:e.map((e,r)=>(0,t.jsxs)("li",{children:[(0,t.jsx)("img",{src:e.Imagem||"default-image-url",alt:e.Nome,style:{width:"50px",height:"50px"}}),(0,t.jsxs)("p",{children:[e.Nome," - R$",e.Preco]}),(0,t.jsxs)("p",{children:["Quantidade no carrinho: ",o[e.produtoId]]}),(0,t.jsx)("button",{onClick:()=>h(e.produtoId,o[e.produtoId]-1,e.Quantidade),children:"-"}),(0,t.jsx)("button",{onClick:()=>h(e.produtoId,o[e.produtoId]+1,e.Quantidade),children:"+"}),(0,t.jsx)("button",{onClick:()=>p(e.produtoId),children:"Remover"})]},r))}),e.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("h3",{children:["Valor Total do Carrinho: R$",c.toFixed(2)]}),(0,t.jsx)("button",{children:"Comprar"})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8086)}),_N_E=e.O()}]);